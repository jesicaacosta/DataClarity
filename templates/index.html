<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plataforma de An√°lisis de Datos</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100..900&family=Roboto:wght@100..900&display=swap"
        rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Parkinsans:wght@300..800&display=swap" rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Parkinsans:wght@300..800&display=swap"
        rel="stylesheet" />

    <script src="https://kit.fontawesome.com/7d4a6c3747.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

    <link href="css/bootstrap.min.css" rel="stylesheet" />
</head>

<nav class="navbar navbar-expand-lg fixed-top">
    <a class="navbar-brand" href="http://127.0.0.1:5000/">
        <img src="/static/images/DATACLARITY.png" width="120px" alt="" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="http://127.0.0.1:5000/">
                    Inicio<span class="sr-only">(current)</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="./faqs.html">Preguntas Frecuentes</a>
            </li>
        </ul>
        <button id="theme-toggle" class="toggle-button" aria-label="Toggle Dark Mode">
            <span class="sun-icon">‚òÄÔ∏è</span>
            <span class="moon-icon">üåô</span>
        </button>
    </div>
</nav>

<body id="app-body">
    {% if data %}
    <div class="carousel" id="carouselExampleIndicators" style="display: none"></div>
    {% else %}
    <div id="carouselExampleIndicators" class="carousel slide mt-1" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{{ url_for('static', filename='images/a.jpg') }}" class="d-block w-100" alt="..." />
                <div class="carousel-caption d-none d-md-block">
                    <h5>Sube tus datos</h5>
                    <p>Comienza a analizar en segundos.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="{{ url_for('static', filename='images/b.jpg') }}" class="d-block w-100" alt="..." />
                <div class="carousel-caption d-none d-md-block">
                    <h5>Visualizaciones Interactivas</h5>
                    <p>Obt√©n gr√°ficos y estad√≠sticas claras.</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="{{ url_for('static', filename='images/c.jpg') }}" class="d-block w-100" alt="..." />
                <div class="carousel-caption d-none d-md-block">
                    <h5>Descarga Resultados</h5>
                    <p>Exporta tus gr√°ficos f√°cilmente.</p>
                </div>
            </div>
        </div>

        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Anterior</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Siguiente</span>
        </a>
    </div>
    {% endif %}
    <main class="container mt-5 pt-5"> 
		<h1>¬°Tus datos, tu negocio!</h1>
		<section class="row">
            <div class="col-md-12 text-center">
                {% if data%}
                <div class="features" style="display: none"></div>
                {% else %}
                <section class="features py-5">
                    <div class="row text-center">
                        <div class="row">
                            <div class="col-md-4">
                                <i class="fas fa-chart-line fa-3x text-primary mb-3"></i>
                                <h5>Visualizaciones Interactivas</h5>
                            </div>
                            <div class="col-md-4">
                                <i class="fas fa-file-upload fa-3x text-success mb-3"></i>
                                <h5>Subida F√°cil de Archivos</h5>
                            </div>
                            <div class="col-md-4">
                                <i class="fas fa-cloud-upload-alt fa-3x text-warning mb-3"></i>
                                <h5>Descarga gratuitamente tus gr√°ficos</h5>
                            </div>
                        </div>
                    </div>
                </section>
                <p>
                    Subiendo tus archivos CSV o Excel con datos de ventas, clima y m√°s,
                    podr√°s generar <b>estad√≠sticas personalizadas</b> y
                    <b> visualizaciones incre√≠bles </b> . Descubr√≠ patrones ocultos,
                    tom√° mejores decisiones y alcanza tus metas!
                </p>
            </div>
        </section> <div class="text-center mb-4 box-subida">
            <h2>Sub√≠ ac√° tu archivo en formato CSV, XLSX O JSON</h2>
            <div class="form-container">
                <form action="/upload" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <input type="file" name="file" id="file-upload" accept=".csv, .xlsx, .json"
                            class="form-control-file" />
                    </div>
                    <button type="submit" class="button_slide slide_right">
                        <i class="fas fa-check-circle"></i>
                        Subir archivo
                    </button>
                </form>
            </div>
        </div>
        {% endif %}

        {% if data %} {% if data %}
        <div class="row mb-4">
            <div class="col-md-12 text-center">
                <a href="{{ url_for('reset_data') }}" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> ELIMINAR DATOS Y REINICIAR
                </a>
            </div>
        </div>
        {% endif %}

        <div class="data-table">
            <h2>Vista previa de los datos cargados:</h2>
            <div class="table-responsive">{{ data|safe }}</div>
            </div>
        {% endif %}

        {% if stats %}
        <div class="data-table">
            <h2>üìà Estad√≠sticas B√°sicasüìà</h2>
            <table class="table-responsive">
                <thead>
                    <tr> 
                        <th>Columna</th>
                        <th>Cantidad</th>
                        <th>Media</th>
                        <th>Desviaci√≥n Est√°ndar</th>
                        <th>Valor M√≠nimo</th>
                        <th>Valor M√°ximo</th>
                    </tr>
                </thead>
                <tbody>
                    {% for column, values in stats.items() %}
                    <tr>
                        <td class="col-data">{{ column }}</td>
                        <td class="col-data">{{ values.count }}</td>
                        <td class="col-data">{{ values.mean }}</td>
                        <td class="col-data">{{ values.std_dev }}</td>
                        <td class="col-data">{{ values.min }}</td>
                        <td class="col-data">{{ values.max }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endif %}

        {% if data and not graph_type %}
            <h1>‚ú® Visualiz√° tu Estrategia de Contenido: ¬°Gener√° Gr√°ficos ahora! ‚ú®</h1>
        <h3>¬øCu√°l elegir?</h3>

        <div class="row">
            <!-- Card: Scatter -->
            <div class="col-lg-4 col-md-6 mb-4">
                <!-- Full card for md and up -->
                <div class="card h-100 d-none d-md-block compact-card">
                    <img class="card-img-top" src="{{ url_for('static', filename='images/graf-disp.png') }}" alt="Gr√°fico de Dispersi√≥n" />
                    <div class="card-body">
                        <h5 class="card-title">Gr√°fico de Dispersi√≥n</h5>
                        <p class="card-text small">
                            Este gr√°fico se utiliza para analizar la relaci√≥n entre dos variables num√©ricas. Ideal para identificar patrones, tendencias o correlaciones.
                        </p>
                    </div>
                </div>
                <!-- Compact view for small screens (shows only title + modal trigger) -->
                <div class="card h-100 d-block d-md-none">
                    <div class="card-body d-flex justify-content-between align-items-center py-2">
                        <strong>Gr√°fico de Dispersi√≥n</strong>
                        <button class="btn btn-link p-0" data-toggle="modal" data-target="#modal-scatter">M√°s</button>
                    </div>
                </div>
                <!-- Modal -->
                <div class="modal fade" id="modal-scatter" tabindex="-1" role="dialog" aria-labelledby="modalScatterLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalScatterLabel">Gr√°fico de Dispersi√≥n</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <img src="{{ url_for('static', filename='images/graf-disp.png') }}" class="img-fluid mb-3" alt="Gr√°fico de Dispersi√≥n" />
                                <p>Este gr√°fico se utiliza para analizar la relaci√≥n entre dos variables num√©ricas. Cada punto representa una observaci√≥n espec√≠fica en el conjunto de datos. En el eje X coloca la variable independiente y en el eje Y la dependiente. Ideal para identificar patrones y correlaciones.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card: Bar -->
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card h-100 d-none d-md-block compact-card">
                    <img class="card-img-top" src="{{ url_for('static', filename='images/barras-1024x768.png.webp') }}" alt="Gr√°fico de Barras" />
                    <div class="card-body">
                        <h5 class="card-title">Gr√°fico de Barras</h5>
                        <p class="card-text small">√ötil para comparar categor√≠as o grupos. En el eje X van las categor√≠as y en el eje Y los valores num√©ricos.</p>
                    </div>
                </div>
                <div class="card h-100 d-block d-md-none">
                    <div class="card-body d-flex justify-content-between align-items-center py-2">
                        <strong>Gr√°fico de Barras</strong>
                        <button class="btn btn-link p-0" data-toggle="modal" data-target="#modal-bar">M√°s</button>
                    </div>
                </div>
                <div class="modal fade" id="modal-bar" tabindex="-1" role="dialog" aria-labelledby="modalBarLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalBarLabel">Gr√°fico de Barras</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <img src="{{ url_for('static', filename='images/barras-1024x768.png.webp') }}" class="img-fluid mb-3" alt="Gr√°fico de Barras" />
                                <p>Este gr√°fico permite comparar categor√≠as de manera visual. Las barras representan los valores de cada categor√≠a ‚Äî √∫til para datos agrupados y comparaciones entre diferentes grupos.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card: Pie -->
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="card h-100 d-none d-md-block compact-card">
                    <img class="card-img-top" src="{{ url_for('static', filename='images/pie-chart.png') }}" alt="Gr√°fico de Torta" />
                    <div class="card-body">
                        <h5 class="card-title">Gr√°fico de Sectores</h5>
                        <p class="card-text small">Muestra c√≥mo se divide un todo en partes proporcionales. Ideal para ver porcentajes o distribuciones entre pocas categor√≠as.</p>
                    </div>
                </div>
                <div class="card h-100 d-block d-md-none">
                    <div class="card-body d-flex justify-content-between align-items-center py-2">
                        <strong>Gr√°fico de Sectores</strong>
                        <button class="btn btn-link p-0" data-toggle="modal" data-target="#modal-pie">M√°s</button>
                    </div>
                </div>
                <div class="modal fade" id="modal-pie" tabindex="-1" role="dialog" aria-labelledby="modalPieLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modalPieLabel">Gr√°fico de Sectores</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <img src="{{ url_for('static', filename='images/pie-chart.png') }}" class="img-fluid mb-3" alt="Gr√°fico de Torta" />
                                <p>Este gr√°fico muestra c√≥mo se divide un todo en partes proporcionales. Cada segmento representa una categor√≠a dentro del conjunto de datos.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-4 contenedor_selecc_graf">
            <form action="/select-graph" method="POST">
                <div class="form-group">
                    <label for="graph-type">üìä Seleccion√° de grafico: üìä</label>
                    <select name="graph_type" id="graph-type" class="form-control" required>
                        <option value="scatter">Gr√°fico de Dispersi√≥n</option>
                        <option value="bar">Gr√°fico de Barras</option>
                        <option value="pie">Gr√°fico de Torta</option>
                    </select>
                </div>
                <button type="submit" class="button_slide slide_right" id="outer">
                    Siguiente
                </button>
            </form>
        </div>
        {% endif %}
		{% if data and graph_type %} <!
        <div class=" mt-4">
            <h2>üìä Configurar Gr√°fico üìä</h2>
            <form action="/generate-graph" method="POST">
                <input type="hidden" name="graph_type" value="{{ graph_type }}" />
                <div class="form-group">
                    <label for="x-column">Columna para el eje X:</label>
                    <select name="x_column" id="x-column" class="form-control" required>
                        {% for col in numeric_columns %}
                        <option value="{{ col }}">{{ col }}</option>
                        {% endfor %} {% for col in categorical_columns %}
                        <option value="{{ col }}">{{ col }}</option>
                        {% endfor %}
                    </select>
                </div>

                {% if graph_type != 'pie' %}
                <div class="form-group">
                    <label for="y-column">Columna para el eje Y:</label>
                    <select name="y_column" id="y-column" class="form-control">
                        {% for col in numeric_columns %}
                        <option value="{{ col }}">{{ col }}</option>
                        {% endfor %}
                    </select>
                </div>
                {% endif %}
                <button type="submit" class="button_slide slide_right">
                    Generar Gr√°fico
                </button>
            </form>
        </div>
        {% endif %}

        <div class="graph-container mt-4">
            {% if graph_html %} {% if graph_type == 'scatter' %}
            <div class="graph-result scatter-graph mt-4">
                <h3>‚ú® Gr√°fico de Dispersi√≥n ‚ú®</h3>
                <p>
                    Explora c√≥mo las variables seleccionadas est√°n relacionadas. ¬°Cada
                    punto cuenta una historia!
                </p>
                <div class="graph-box">{{ graph_html|safe }}</div>
                <p>
                    Relaci√≥n entre <strong>{{ y_column }}</strong> y
                    <strong>{{ x_column }}</strong>. Observa los patrones y tendencias.
                </p>
            </div>
            {% elif graph_type == 'bar' %}
            <div class="graph-result bar-graph mt-4">
                <h3>üìä Gr√°fico de Barras üìä</h3>
                <p>
                    Compara categor√≠as o grupos y descubre las diferencias visualmente.
                </p>
                <div class="graph-box">{{ graph_html|safe }}</div>
            </div>
            {% elif graph_type == 'pie' %}
            <div class="graph-result pie-graph mt-4">
                <h3>ü•ß Gr√°fico de Torta ü•ß</h3>
                <p>
                    Mira las proporciones y distribuciones de cada categor√≠a en un
                    vistazo.
                </p>
                <div class="graph-box">{{ graph_html|safe }}</div>
                <p>
                    Cada segmento representa la proporci√≥n de
                    <strong>{{ y_column }}</strong>.
                </p>
            </div>
            {% else %}
            <p>‚ö†Ô∏è Tipo de gr√°fico no soportado..</p>
            {% endif %}
            <div class="tabla-graph">
                <h2>Datos del Gr√°fico</h2>
                <pre>{{ data_text }}</pre>
            </div>
            {% else %}
            <p>
                üö´ No se ha generado ning√∫n gr√°fico. Sube tus datos y selecciona el tipo
                de gr√°fico.
            </p>
            {% endif %}
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <p class="mb-0">
                        &copy; 2025 DataClarity. Todos los derechos reservados.
                    </p>
                </div>
                <div class="col-md-4 text-md-center">
                    <p>Seguinos en nuestras redes!</p>
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>